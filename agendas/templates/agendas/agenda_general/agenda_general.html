{% extends 'nucleo/base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block title %}Agenda General - G. R.{% endblock %}

{% block plugin_css %}
    <link rel="stylesheet" href="{% static 'nucleo/assets/css/bootstrap-datepicker3.min.css' %}" />
{% endblock %}

{% block breadcrumb %}
    <li>
        <a href="#">Agenda General</a>
    </li>

    <li class="active">Listar</li>
{% endblock %}

{% block header %}
    <div class="ace-settings-container" id="ace-settings-container">
        <a href="{% url 'agendas.crear' %}" class="btn btn-primary align-right">
            <i class="ace-icon fa fa-flask align-top bigger-125"></i>
            Agendar Recursos
        </a>
    </div>

    <div class="page-header">
        <h1>
            Agenda General
            <small>
                <i class="ace-icon fa fa-angle-double-right"></i>
                Corporación UNIREMINGTON
            </small>
        </h1>
    </div>
{% endblock %}

{% block content %}
    <form action="" method="get">
    <div class="row">
        <div class="col-sm-4">
            <div class="widget-body">
                <div class="widget-main">
                    <label for="id-date-picker-1">Fecha De Agenda</label>

                    <div class="row">
                        <div class="col-xs-8 col-sm-11">
                            <div class="input-group">
                                <input class="form-control date-picker" name="fecha" id="id-date-picker-1" type="text" data-date-format="dd-mm-yyyy" />
                                <span class="input-group-addon">
                                    <i class="fa fa-calendar bigger-110"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="widget-body">
                <div class="widget-main">
                    <button type="submit" value="Crear" class="btn btn-primary">
                        <i class="ace-icon fa fa-filter bigger-120"></i>Filtrar
                    </button>
                </div>
            </div>
        </div>
    </div>
    </form>
    <div class="row">
        <div class="col-xs-12">
            <table id="simple-table" class="table  table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Responsable</th>
                        <th>Fecha de Reserva</th>
                        <th>Hora Inicio</th>
                        <th>Hora Fin</th>
                        <th>Recurso Físico</th>
                        <th>Recurso Tecnologico</th>
{#                        <th></th>#}
                    </tr>
                </thead>

                <tbody>
                    {% for solicitud in agendas %}
                        <tr>
                            <td>{{ solicitud.usuario.nombre_completo }}</td>
                            <td>{{ solicitud.fecha_separacion }}</td>
                            <td>{{ solicitud.hora_separacion }}</td>
                            <td>{{ solicitud.hora_devolucion }}</td>
                            <td>{{ solicitud.recurso_fisico }}</td>
                            <td>
                                {% for recurso in solicitud.recurso_tecnologico.all %}
                                {{ recurso }}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            </td>
{#                            <td>#}
{#                                <div class="hidden-sm hidden-xs btn-group">#}
{#                                    <button class="btn btn-xs btn-success">#}
{#                                        <i class="ace-icon fa fa-check bigger-120"></i>#}
{#                                    </button>#}
{##}
{#                                    <a href="{% url 'agendas.actualizar' solicitud.id %}" class="btn btn-xs btn-info">#}
{#                                        <i class="ace-icon fa fa-pencil bigger-120"></i>#}
{#                                    </a>#}
{##}
{#                                    <a href="{% url 'agendas.eliminar' solicitud.id %}" class="btn btn-xs btn-danger">#}
{#                                        <i class="ace-icon fa fa-trash-o bigger-120"></i>#}
{#                                    </a>#}
{#                                </div>#}
{#                            </td>#}
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="8" align="center">
                                No existen solicitudes registradas en la agenda en este momento.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block js_extra %}
    <!--[if lte IE 8]>
      <script src="assets/js/excanvas.min.js"></script>
    <![endif]-->
    <script src="{% static 'nucleo/assets/js/jquery-ui.custom.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/jquery.ui.touch-punch.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/chosen.jquery.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/spinbox.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/bootstrap-timepicker.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/moment.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/daterangepicker.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/bootstrap-colorpicker.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/jquery.knob.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/autosize.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/jquery.inputlimiter.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/jquery.maskedinput.min.js' %}"></script>
    <script src="{% static 'nucleo/assets/js/bootstrap-tag.min.js' %}"></script>

{% endblock %}

{% block js_script %}
    <script type="text/javascript">
        if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
    </script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- page specific plugin scripts -->

    <!-- ace scripts -->
    <script src="assets/js/ace-elements.min.js"></script>
    <script src="assets/js/ace.min.js"></script>

    <!-- inline scripts related to this page -->
    <script type="text/javascript">
        jQuery(function($) {
            $('.modal.aside').ace_aside();

            $('#aside-inside-modal').addClass('aside').ace_aside({container: '#my-modal > .modal-dialog'});

            //$('#top-menu').modal('show')

            $(document).one('ajaxloadstart.page', function(e) {
                //in ajax mode, remove before leaving page
                $('.modal.aside').remove();
                $(window).off('.aside')
            });


            //make content sliders resizable using jQuery UI (you should include jquery ui files)
            //$('#right-menu > .modal-dialog').resizable({handles: "w", grid: [ 20, 0 ], minWidth: 200, maxWidth: 600});

            //datepicker plugin
				//link
				$('.date-picker').datepicker({
					autoclose: true,
					todayHighlight: true
				})
				//show datepicker when clicking on the icon
				.next().on(ace.click_event, function(){
					$(this).prev().focus();
				});

				//or change it into a date range picker
				$('.input-daterange').datepicker({autoclose:true});


				//to translate the daterange picker, please copy the "examples/daterange-fr.js" contents here before initialization
				$('input[name=date-range-picker]').daterangepicker({
					'applyClass' : 'btn-sm btn-success',
					'cancelClass' : 'btn-sm btn-default',
					locale: {
						applyLabel: 'Apply',
						cancelLabel: 'Cancel',
					}
				})
				.prev().on(ace.click_event, function(){
					$(this).next().focus();
				});


				$('#timepicker1').timepicker({
					minuteStep: 1,
					showSeconds: true,
					showMeridian: false,
					disableFocus: true,
					icons: {
						up: 'fa fa-chevron-up',
						down: 'fa fa-chevron-down'
					}
				}).on('focus', function() {
					$('#timepicker1').timepicker('showWidget');
				}).next().on(ace.click_event, function(){
					$(this).prev().focus();
				});




				if(!ace.vars['old_ie']) $('#date-timepicker1').datetimepicker({
				 //format: 'MM/DD/YYYY h:mm:ss A',//use this option to display seconds
				 icons: {
					time: 'fa fa-clock-o',
					date: 'fa fa-calendar',
					up: 'fa fa-chevron-up',
					down: 'fa fa-chevron-down',
					previous: 'fa fa-chevron-left',
					next: 'fa fa-chevron-right',
					today: 'fa fa-arrows ',
					clear: 'fa fa-trash',
					close: 'fa fa-times'
				 }
				}).next().on(ace.click_event, function(){
					$(this).prev().focus();
				});


				$('#colorpicker1').colorpicker();
				//$('.colorpicker').last().css('z-index', 2000);//if colorpicker is inside a modal, its z-index should be higher than modal'safe

				$('#simple-colorpicker-1').ace_colorpicker();
				//$('#simple-colorpicker-1').ace_colorpicker('pick', 2);//select 2nd color
				//$('#simple-colorpicker-1').ace_colorpicker('pick', '#fbe983');//select #fbe983 color
				//var picker = $('#simple-colorpicker-1').data('ace_colorpicker')
				//picker.pick('red', true);//insert the color if it doesn't exist


				$(".knob").knob();


				var tag_input = $('#form-field-tags');
				try{
					tag_input.tag(
					  {
						placeholder:tag_input.attr('placeholder'),
						//enable typeahead by specifying the source array
						source: ace.vars['US_STATES'],//defined in ace.js >> ace.enable_search_ahead
						/**
						//or fetch data from database, fetch those that match "query"
						source: function(query, process) {
						  $.ajax({url: 'remote_source.php?q='+encodeURIComponent(query)})
						  .done(function(result_items){
							process(result_items);
						  });
						}
						*/
					  }
					)

					//programmatically add/remove a tag
					var $tag_obj = $('#form-field-tags').data('tag');
					$tag_obj.add('Programmatically Added');

					var index = $tag_obj.inValues('some tag');
					$tag_obj.remove(index);
				}
				catch(e) {
					//display a textarea for old IE, because it doesn't support this plugin or another one I tried!
					tag_input.after('<textarea id="'+tag_input.attr('id')+'" name="'+tag_input.attr('name')+'" rows="3">'+tag_input.val()+'</textarea>').remove();
					//autosize($('#form-field-tags'));
				}


				/////////
				$('#modal-form input[type=file]').ace_file_input({
					style:'well',
					btn_choose:'Drop files here or click to choose',
					btn_change:null,
					no_icon:'ace-icon fa fa-cloud-upload',
					droppable:true,
					thumbnail:'large'
				})

				//chosen plugin inside a modal will have a zero width because the select element is originally hidden
				//and its width cannot be determined.
				//so we set the width after modal is show
				$('#modal-form').on('shown.bs.modal', function () {
					if(!ace.vars['touch']) {
						$(this).find('.chosen-container').each(function(){
							$(this).find('a:first-child').css('width' , '210px');
							$(this).find('.chosen-drop').css('width' , '210px');
							$(this).find('.chosen-search input').css('width' , '200px');
						});
					}
				})
				/**
				//or you can activate the chosen plugin after modal is shown
				//this way select element becomes visible with dimensions and chosen works as expected
				$('#modal-form').on('shown', function () {
					$(this).find('.modal-chosen').chosen();
				})
				*/



				$(document).one('ajaxloadstart.page', function(e) {
					autosize.destroy('textarea[class*=autosize]')

					$('.limiterBox,.autosizejs').remove();
					$('.daterangepicker.dropdown-menu,.colorpicker.dropdown-menu,.bootstrap-datetimepicker-widget.dropdown-menu').remove();
				});

        });


    </script>
{% endblock %}